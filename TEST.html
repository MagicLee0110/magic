<!DOCTYPE html>
<html lang="zh-TW">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
 <meta name="apple-mobile-web-app-capable" content="yes">
 <meta name="apple-mobile-web-app-status-bar-style" content="default">
 <style>
    :root {
        --paper-bg: #fffdfb; --text-color: #787878; --header-text: #666; --accent-brown: #8b572a; --shelf-bg: #ffffff; --ui-blue: #007aff;
    }
    * { -webkit-tap-highlight-color: transparent !important; -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; outline: none; box-sizing: border-box; }
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; background-color: #fff; font-family: -apple-system, sans-serif; overflow: hidden; }

    /* æ›¸æ«ƒä»‹é¢ */
    #library-view { background-color: var(--shelf-bg); width: 100%; max-width: 500px; height: 100dvh; margin: 0 auto; display: flex; flex-direction: column; z-index: 300; position: relative; }
    .lib-header { height: 60px; display: flex; align-items: center; padding: env(safe-area-inset-top, 0) 20px 0; font-size: 20px; font-weight: bold; border-bottom: 1px solid #f0f0f0; }
    .lib-content { flex: 1; overflow-y: auto; padding: 20px; }
    .book-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .book-card { display: flex; flex-direction: column; cursor: pointer; }
    .book-cover { width: 100%; aspect-ratio: 2/3; background: #eee; border-radius: 4px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; text-align: center; padding: 12px; font-size: 14px; }
    .book-info { margin-top: 8px; font-size: 13px; color: #333; height: 36px; overflow: hidden; }
    .book-progress { font-size: 11px; color: #999; margin-top: 4px; }
    
    /* åº•éƒ¨å°èˆª */
    .nav-bar { height: calc(60px + env(safe-area-inset-bottom, 0)); border-top: 1px solid #eee; display: flex; justify-content: space-around; align-items: center; padding-bottom: env(safe-area-inset-bottom, 0); background: #fafafa; }
    .nav-item { display: flex; flex-direction: column; align-items: center; gap: 4px; font-size: 10px; color: #999; }
    .nav-item.active { color: var(--ui-blue); }

    /* æ›¸ç±è³‡è¨Š */
    #info-view { display: none; background: white; width: 100%; height: 100dvh; position: absolute; top: 0; left: 0; z-index: 400; padding: 40px 25px; flex-direction: column; align-items: center; }
    .read-btn { width: 100%; background: var(--ui-blue); color: white; padding: 15px; border-radius: 8px; font-weight: bold; margin-top: auto; text-align: center; font-size: 16px; }

    /* é­”è¡“è¼¸å…¥ */
    #magic-setup { flex: 1; padding: 25px 20px; text-align: center; overflow-y: auto; display: none; z-index: 600; background: white; }
    .btn-group { display: flex; justify-content: center; flex-wrap: wrap; margin-bottom: 8px; }
    .small-button { width: 44px; height: 44px; font-size: 20px; margin: 3px; cursor: pointer; border: 1px solid #eee; border-radius: 10px; background: white; color: #777; }
    input { width: 85%; padding: 15px; border: 1px solid #f0f0f0; border-radius: 12px; margin: 15px 0; text-align: center; font-size: 18px; color: var(--accent-brown); font-weight: bold; }
    .calc-btn { background: var(--accent-brown); color: white; border: none; padding: 16px 50px; border-radius: 35px; font-size: 18px; font-weight: bold; margin-top: 20px; }

    /* é–±è®€å™¨ */
    #ebook-app { background-color: var(--paper-bg); width: 100%; max-width: 500px; height: 100dvh; display: none; flex-direction: column; margin: 0 auto; position: relative; overflow: hidden; z-index: 500; }
    #watermark { position: absolute; top: 55%; left: 50%; transform: translate(-50%, -50%) rotate(-30deg); font-size: 34px; color: rgba(0,0,0,0.04); white-space: nowrap; pointer-events: none; z-index: 1; font-weight: bold; letter-spacing: 12px; display: none; }
    #app-header { flex-shrink: 0; height: calc(50px + env(safe-area-inset-top, 0)); display: flex; justify-content: space-between; align-items: center; padding: env(safe-area-inset-top, 0) 20px 0 20px; border-bottom: 1px solid rgba(0,0,0,0.04); color: var(--header-text); background: var(--paper-bg); z-index: 100; }
    #article { flex: 1; overflow-y: auto; padding: 30px 25px 60px 35px; text-align: justify; line-height: 2.3; font-size: 18px; color: var(--text-color); position: relative; z-index: 2; -webkit-overflow-scrolling: touch; display: none; }
    #article::-webkit-scrollbar { display: none; }
    #article p { margin-bottom: 35px; text-indent: 2em; font-family: "Noto Serif TC", serif; letter-spacing: 0.8px; }
    
    #app-footer { flex-shrink: 0; background: var(--paper-bg); border-top: 1px solid rgba(0,0,0,0.04); padding: 15px 30px calc(25px + env(safe-area-inset-bottom, 15px)) 30px; z-index: 100; display: none; }
    .progress-container { width: 100%; height: 2px; background: #f2f2f2; position: relative; margin-bottom: 12px; }
    .progress-dot { width: 7px; height: 7px; background: var(--accent-brown); border-radius: 50%; position: absolute; top: -2.5px; transition: left 0.6s ease; }
    .footer-info { display: flex; justify-content: center; font-size: 10px; color: #cccccc; letter-spacing: 2px; font-weight: bold; }

    #prevPageArea, #nextPageArea { position: absolute; top: 100px; bottom: 100px; width: 35%; z-index: 200; display: none; }
    #prevPageArea { left: 0; } #nextPageArea { right: 0; }
    .fade-page { animation: fadeIn 0.8s ease-out forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    .drop-cap::first-letter { float: left; font-size: 50px; line-height: 1; padding: 4px 8px 0 0; color: var(--accent-brown); font-family: serif; }
    .master-note { background: rgba(0,0,0,0.02); border-left: 2px solid var(--accent-brown); padding: 15px 20px; margin: 30px 0; font-size: 16px; font-style: italic; color: #999; }
    .book-img { text-align: center; margin: 25px 0; padding: 10px; border: 1px solid rgba(0,0,0,0.02); }
    .book-img img { max-width: 100%; filter: sepia(15%) contrast(90%); opacity: 0.85; }
 </style>
</head>
<body>

<div id="library-view">
    <div class="lib-header">æˆ‘çš„æ›¸æ«ƒ</div>
    <div class="lib-content">
        <div class="book-grid">
            <div class="book-card" onclick="alert('åŒæ­¥ä¸­')"><div class="book-cover" style="background:#4a5a6a;color:#fff">æš—ç¤ºçš„å¿ƒç†æ©Ÿåˆ¶</div><div class="book-info">å¿ƒç†å­¸æ‡‰ç”¨ç³»åˆ—</div><div class="book-progress">æœªè®€</div></div>
            <div class="book-card" onclick="openBookInfo()"><div class="book-cover" style="background:#2c1e16;color:#d4af37;border:4px solid #241811">THE MAGIC SENTINEL</div><div class="book-info">é­”è¡“å“¨å…µï¼šå¿ƒéˆä½ç§»ç ”ç©¶</div><div class="book-progress">36% å·²è®€</div></div>
            <div class="book-card" onclick="alert('å°šæœªä¸‹è¼‰')"><div class="book-cover" style="background:#6a4a4a;color:#fff">æ©Ÿç‡èˆ‡çµ±è¨ˆç›²é»</div><div class="book-info">é«˜ç­‰æ•¸å­¸ç ”ç©¶</div><div class="book-progress">æœªè®€</div></div>
            <div class="book-card" onclick="alert('å°šæœªä¸‹è¼‰')"><div class="book-cover" style="background:#4a6a5a;color:#fff">éèªç¾©æºé€šæŠ€è¡“</div><div class="book-info">FBI å¯¦æˆ°æ‰‹å†Š</div><div class="book-progress">100% å·²è®€</div></div>
            <div class="book-card" onclick="alert('å°šæœªä¸‹è¼‰')"><div class="book-cover" style="background:#6a6a4a;color:#fff">è¡Œç‚ºç¶“æ¿Ÿå­¸å°è«–</div><div class="book-info">ç¤¾æœƒç§‘å­¸ç³»åˆ—</div><div class="book-progress">æœªè®€</div></div>
            <div class="book-card" onclick="alert('å°šæœªä¸‹è¼‰')"><div class="book-cover" style="background:#4a4a4a;color:#fff">å†·è®€è¡“ï¼šå¾é›¶é–‹å§‹</div><div class="book-info">ç§äººæ‰‹ç¨¿ç³»åˆ—</div><div class="book-progress">12% å·²è®€</div></div>
        </div>
    </div>
    <div class="nav-bar">
        <div class="nav-item active"><span>ğŸ“š æ›¸æ«ƒ</span></div>
        <div class="nav-item"><span>ğŸ›’ å•†åº—</span></div>
        <div class="nav-item"><span>ğŸ‘¤ è¨­å®š</span></div>
    </div>
</div>

<div id="info-view">
    <div style="align-self:flex-start;color:var(--ui-blue)" onclick="closeBookInfo()">â€¹ è¿”å›æ›¸æ«ƒ</div>
    <div class="info-cover" style="background:#2c1e16;color:#d4af37;width:160px;height:240px;display:flex;align-items:center;justify-content:center;text-align:center;font-weight:bold;margin-top:20px;box-shadow:0 10px 30px rgba(0,0,0,0.2)">THE MAGIC SENTINEL</div>
    <div class="info-title">é­”è¡“å“¨å…µ (Vol. III)</div>
    <div class="info-author" style="color:var(--ui-blue)">David Berglas / å…§éƒ¨å­˜æª”</div>
    <div class="info-desc">æœ¬ç« è©³ç´°è¨˜éŒ„äº† 1970 å¹´ä»£å¤§å¸«ç´šäººç‰©çš„å¿ƒç†åšå¼ˆèˆ‡å³èˆˆå¥‡è¹Ÿä¹‹å¯¦éŒ„ã€‚</div>
    <div class="read-btn" onclick="openSetup()">ç¹¼çºŒé–±è®€</div>
</div>

<div id="magic-setup">
    <div style="text-align:left;color:#999" onclick="closeSetup()">â€¹ è¿”å›</div>
    <h3 style="margin-top:20px">é©—è­‰æ¬Šé™</h3>
    <div class="btn-group"><button class="small-button" onclick="chooseCard('é»‘æ¡ƒ')">â™ </button><button class="small-button" onclick="chooseCard('ç´…å¿ƒ')">â™¥</button><button class="small-button" onclick="chooseCard('æ–¹å¡Š')">â™¦</button><button class="small-button" onclick="chooseCard('æ¢…èŠ±')">â™£</button></div>
    <div class="btn-group"><button class="small-button" onclick="chooseCard('A')">A</button><button class="small-button" onclick="chooseNumInput('2')">2</button><button class="small-button" onclick="chooseNumInput('3')">3</button><button class="small-button" onclick="chooseNumInput('4')">4</button><button class="small-button" onclick="chooseNumInput('5')">5</button><button class="small-button" onclick="chooseNumInput('6')">6</button><button class="small-button" onclick="chooseNumInput('7')">7</button><button class="small-button" onclick="chooseNumInput('8')">8</button><button class="small-button" onclick="chooseNumInput('9')">9</button><button class="small-button" onclick="chooseNumInput('10')">10</button><button class="small-button" onclick="chooseCard('J')">J</button><button class="small-button" onclick="chooseCard('Q')">Q</button><button class="small-button" onclick="chooseCard('K')">K</button></div>
    <input type="text" id="cardInput" readonly placeholder="è¨­å®šå †ç–Šåºåˆ—">
    <div class="btn-group"><button class="small-button" onclick="chooseNumber('1')">1</button><button class="small-button" onclick="chooseNumber('2')">2</button><button class="small-button" onclick="chooseNumber('3')">3</button><button class="small-button" onclick="chooseNumber('4')">4</button><button class="small-button" onclick="chooseNumber('5')">5</button><button class="small-button" onclick="chooseNumber('6')">6</button><button class="small-button" onclick="chooseNumber('7')">7</button><button class="small-button" onclick="chooseNumber('8')">8</button><button class="small-button" onclick="chooseNumber('9')">9</button><button class="small-button" onclick="chooseNumber('0')">0</button></div>
    <input type="number" id="number" readonly placeholder="è¨­å®šç›®æ¨™ç´¢å¼•">
    <button class="calc-btn" onclick="calculate()">å•Ÿå‹•å…¨å±é–±è®€</button>
</div>

<div id="ebook-app">
    <div id="watermark">ç‰ˆæ¬Šæ‰€æœ‰ Â· ç¿»å°å¿…ç©¶</div>
    <div id="app-header"><span onclick="resetApp()" style="font-size:32px;font-weight:300">â€¹</span><span style="font-size:12px;letter-spacing:2px;color:#d0d0d0">THE MAGIC SENTINEL</span><div style="font-size:16px;opacity:0.4">á´€A&nbsp;&nbsp;ğŸ”–</div></div>
    <div id="article"><div id="articleContent" class="fade-page"></div></div>
    <div id="app-footer"><div class="progress-container"><div class="progress-dot" id="dot"></div></div><div class="footer-info"><span>ç¬¬ <span id="cur-p"></span> é  / å…± 100 é </span></div></div>
    <div id="prevPageArea" onclick="prev()"></div><div id="nextPageArea" onclick="next()"></div>
</div>

<script>
    var stack = [{suit:"æ¢…èŠ±",number:"4"},{suit:"ç´…å¿ƒ",number:"2"},{suit:"æ–¹å¡Š",number:"7"},{suit:"æ¢…èŠ±",number:"3"},{suit:"ç´…å¿ƒ",number:"4"},{suit:"æ–¹å¡Š",number:"6"},{suit:"é»‘æ¡ƒ",number:"A"},{suit:"ç´…å¿ƒ",number:"5"},{suit:"é»‘æ¡ƒ",number:"9"},{suit:"é»‘æ¡ƒ",number:"2"},{suit:"ç´…å¿ƒ",number:"Q"},{suit:"æ–¹å¡Š",number:"3"},{suit:"æ¢…èŠ±",number:"Q"},{suit:"ç´…å¿ƒ",number:"8"},{suit:"é»‘æ¡ƒ",number:"6"},{suit:"é»‘æ¡ƒ",number:"5"},{suit:"ç´…å¿ƒ",number:"9"},{suit:"æ¢…èŠ±",number:"K"},{suit:"æ–¹å¡Š",number:"2"},{suit:"ç´…å¿ƒ",number:"J"},{suit:"é»‘æ¡ƒ",number:"3"},{suit:"é»‘æ¡ƒ",number:"8"},{suit:"ç´…å¿ƒ",number:"6"},{suit:"æ¢…èŠ±",number:"10"},{suit:"æ–¹å¡Š",number:"5"},{suit:"æ–¹å¡Š",number:"K"},{suit:"æ¢…èŠ±",number:"2"},{suit:"ç´…å¿ƒ",number:"3"},{suit:"æ–¹å¡Š",number:"8"},{suit:"æ¢…èŠ±",number:"5"},{suit:"é»‘æ¡ƒ",number:"K"},{suit:"æ–¹å¡Š",number:"J"},{suit:"æ¢…èŠ±",number:"8"},{suit:"é»‘æ¡ƒ",number:"10"},{suit:"ç´…å¿ƒ",number:"K"},{suit:"æ¢…èŠ±",number:"J"},{suit:"é»‘æ¡ƒ",number:"7"},{suit:"ç´…å¿ƒ",number:"10"},{suit:"æ–¹å¡Š",number:"A"},{suit:"é»‘æ¡ƒ",number:"4"},{suit:"ç´…å¿ƒ",number:"7"},{suit:"æ–¹å¡Š",number:"4"},{suit:"æ¢…èŠ±",number:"A"},{suit:"æ¢…èŠ±",number:"9"},{suit:"é»‘æ¡ƒ",number:"J"},{suit:"æ–¹å¡Š",number:"Q"},{suit:"æ¢…èŠ±",number:"7"},{suit:"é»‘æ¡ƒ",number:"Q"},{suit:"æ–¹å¡Š",number:"10"},{suit:"æ¢…èŠ±",number:"6"},{suit:"ç´…å¿ƒ",number:"A"},{suit:"æ–¹å¡Š",number:"9"}];
    var allDecks = {}; for (var i = 0; i < 13; i++) { allDecks[String.fromCharCode(65 + i)] = stack.slice(i * 4).concat(stack.slice(0, i * 4)); }
    var resultAction = "", currentPage = 37;

    function openBookInfo() { document.getElementById("library-view").style.display = "none"; document.getElementById("info-view").style.display = "flex"; }
    function closeBookInfo() { document.getElementById("info-view").style.display = "none"; document.getElementById("library-view").style.display = "block"; }
    function openSetup() { document.getElementById("info-view").style.display = "none"; document.getElementById("magic-setup").style.display = "block"; }
    function closeSetup() { document.getElementById("magic-setup").style.display = "none"; document.getElementById("info-view").style.display = "flex"; }
    function chooseCard(v) { document.getElementById("cardInput").value += v; }
    function chooseNumInput(v) { document.getElementById("cardInput").value += v; }
    function chooseNumber(v) { document.getElementById("number").value += v; }
    function resetApp() { document.getElementById("ebook-app").style.display = "none"; document.getElementById("library-view").style.display = "block"; }

    function calculate() {
        var cv = document.getElementById("cardInput").value, nv = parseInt(document.getElementById("number").value), parsed = parse(cv);
        if (!parsed || isNaN(nv)) { alert("è«‹æ­£ç¢ºè¼¸å…¥åºåˆ—åƒæ•¸"); return; }
        let found = false;
        for (let k in allDecks) {
            let deck = allDecks[k], pos = getPos(deck, parsed);
            if (pos + 2 === nv) { setRes(k, "èƒŒé¢å‘ä¸Šä¸€å¼µå¼µå¾€ä¸‹ç™¼"); found = true; break; }
            if (pos === nv) { setRes(k, "æ‹¿æ‰å»£å‘Šç‰Œå¾Œï¼ŒèƒŒé¢å‘ä¸Šä¸€å¼µå¼µå¾€ä¸‹ç™¼"); found = true; break; }
            if (55 - pos === nv) { setRes(k, "ç‰Œé¢å‘ä¸Šä¸€å¼µä¸€å¼µå¾€ä¸‹ç™¼ï¼Œä½¿æˆ‘å¯ä»¥æ¸…æ¥šçš„çœ‹è¦‹æ¯ä¸€å¼µæ’²å…‹ç‰Œçš„ç‰Œé¢"); found = true; break; }
            if (53 - pos === nv) { setRes(k, "æ‹¿æ‰é¬¼ç‰Œå¾Œï¼Œç‰Œé¢å‘ä¸Šä¸€å¼µä¸€å¼µå¾€ä¸‹ç™¼ï¼ŒåŒæ™‚æˆ‘å¯ä»¥æ¸…æ¥šçš„çœ‹è¦‹æ¯ä¸€å¼µæ’²å…‹ç‰Œçš„ç‰Œé¢"); found = true; break; }
        }
        if(!found) { alert("æ­¤åºåˆ—è¶…å‡ºäº†è®€å–ç¯„åœã€‚"); return; }
        document.getElementById("magic-setup").style.display = "none"; document.getElementById("ebook-app").style.display = "flex";
        document.getElementById("article").style.display = "block"; document.getElementById("app-footer").style.display = "block";
        document.getElementById("watermark").style.display = "block"; document.getElementById("prevPageArea").style.display = "block";
        document.getElementById("nextPageArea").style.display = "block"; currentPage = 37; render();
    }

    function setRes(k, act) {
        var locs = {"A":"çª—å°ä¸Š","B":"æ›¸æ«ƒä¸­é–“","C":"é…’æ«ƒè£¡","D":"è¡£æ«ƒè£¡","E":"æ‰‹æåŒ…å…§","F":"å£è¢‹å…§","G":"æ¤…å­åº•ä¸‹","H":"æ¡Œä¸Šçš„ç›’å­å…§","I":"æ‹›è²¡è²“å¾Œé¢","J":"æ¡Œå­ä¸‹é¢çš„æŠ½å±œ","K":"æ¡Œå­å´é‚Šçš„æŠ½å±œ","L":"é›»è¦–æ­£ä¸‹æ–¹çš„æŠ½å±œ","M":"é›»è¦–æ­£ä¸Šæ–¹çš„æ«ƒå­"};
        resultAction = `å¾${locs[k]}æ‹¿å‡ºä¸€å‰¯æ’²å…‹ç‰Œï¼Œå¤§è¡›è«‹æˆ‘å°‡ç‰Œå–å‡ºï¼Œ${act}ï¼Œ`;
    }

    function getPos(d, t) { for(var i=0; i<d.length; i++) if(d[i].suit === t.s && d[i].number === t.number) return i + 1; return -1; }
    function parse(s) { var m = s.match(/^(é»‘æ¡ƒ|ç´…å¿ƒ|æ–¹å¡Š|æ¢…èŠ±)([2-9]|10|A|J|Q|K)$/); return m ? { s: m[1], number: m[2] } : null; }

    const dict = {
        T: ["èªçŸ¥å¤±èª¿ç†è«–","é æœŸç®¡ç†æ©Ÿåˆ¶","æ·±åº¦å†·è®€è¡“","é›™é‡ç¾å¯¦æ¶æ§‹","è¡Œç‚ºå¿ƒç†å­¸æ‡‰ç”¨","æ©Ÿç‡è«–èˆ‡æ½›æ„è­˜","è¦–è¦ºæ®˜å½±æ“ç¸±","æ²ˆé»˜çš„å‘½ä»¤","çµ•å°ä½ç§»é‚è¼¯","å ´åŸŸæ§åˆ¶æŠ€è¡“","è™›å‡è¨˜æ†¶æ¤å…¥","èªçŸ¥æ–·å±¤å¯¦é©—","å¾®è¡¨æƒ…ç²¾ç¢ºæ•æ‰","ç¬¦è™Ÿå­¸çš„è¡¨æ¼”åŒ–","å¿ƒç†å¼·åˆ¶æŠ€è¡“","ç’°å¢ƒå†·è®€å¯¦å‹™","æ³¨æ„åŠ›åˆ†é…æ©Ÿåˆ¶","é è¨€çš„ç‰©ç†æ€§","æ©Ÿç‡çš„å½è£","å¿ƒç†é‡æ§‹å­¸"],
        S1: ["å¿ƒéˆé­”è¡“çš„æ ¸å¿ƒä¸åœ¨æ–¼æ‰‹æ³•ï¼Œè€Œåœ¨æ–¼èªçŸ¥çš„é‡æ§‹ã€‚","æˆ‘å€‘å¿…é ˆæ‰¿èªï¼Œæ‰€è¬‚çš„è‡ªç”±æ„å¿—åœ¨ç‰¹å®šç’°å¢ƒä¸‹æ¥µæ˜“è¢«æ“æ§ã€‚","çœŸæ­£çš„é­”æ³•ç™¼ç”Ÿåœ¨é‚£äº›è§€çœ¾å°šæœªå¯Ÿè¦ºçš„å¿ƒç†ç¸«éš™ä¸­ã€‚","å¤§å¸«æ›¾å¼·èª¿ï¼Œä½ç§»ä¸åƒ…æ˜¯ç‰©ç†å‹•ä½œï¼Œæ›´æ˜¯æ„è­˜çš„éŒ¯ä½ã€‚","å¿ƒéˆæ„Ÿæ‡‰ä¸¦éè¶…èƒ½åŠ›ï¼Œè€Œæ˜¯ä¸€ç¨®å°ç’°å¢ƒç´°ç¯€çš„æ¥µè‡´åˆ©ç”¨ç­–ç•¥ã€‚"],
        S2: ["åˆ©ç”¨ç’°å¢ƒä¸­çš„è‡ªç„¶å™ªéŸ³é®è”½é—œéµå‹•ä½œï¼Œæ˜¯ 19 ä¸–ç´€ä»¥ä¾†å¿ƒéˆå¸«çš„ç¥•å¯†ã€‚","ç•¶è§€çœ¾èªªå‡ºæ•¸å­—æ™‚ï¼Œä½ çš„çœ¼ç¥äº¤æœƒé »ç‡å°‡ç›´æ¥æ±ºå®šå…¶ç¢ºä¿¡ç¨‹åº¦ã€‚","åœ¨çœ‹ä¼¼éš¨æ©Ÿçš„æ’åˆ—ä¸­ï¼Œäººé¡å¤§è…¦æœƒè‡ªå‹•å¡«è£œç¬¦åˆé‚è¼¯çš„è§£é‡‹ã€‚","å†·è®€çš„æ ¸å¿ƒåœ¨æ–¼å°æ™®éå…±æ€§çš„ç²¾ç¢ºæ•æ‰ï¼Œè€Œéç›²ç›®çŒœæ¸¬ã€‚","å»ºç«‹ä¸€å€‹çµ•å°å°é–‰ä¸”å…¬å¹³çš„å ´åŸŸï¼Œæ˜¯é”æˆ ACAAN è–æ¯çš„å…ˆæ±ºæ¢ä»¶ã€‚"],
        N: ["æ³¨æ„ï¼šåš´ç¦åœ¨åŒä¸€æ‰¹è§€çœ¾å‰é‡è¤‡ä½¿ç”¨ç›¸åŒçš„æš—ç¤ºé‚è¼¯ã€‚","è¨»è§£ï¼šæ­¤æŠ€è¡“åœ¨ 1976 å¹´çš„ç§äººè¨˜éŒ„ä¸­æœ‰è©³ç´°çš„å¿ƒç†è®Šé‡åˆ†æã€‚","å¤§å¸«ç­†è¨˜ï¼šæ²ˆé»˜æ˜¯å»ºç«‹å ´åŸŸæ§åˆ¶æœ€å¼·å¤§çš„æ­¦å™¨ã€‚","è­¦å‘Šï¼šéåº¦ä¾è³´æ­¤æŠ€è¡“å¯èƒ½å°è‡´è§€çœ¾ç”¢ç”Ÿåš´é‡çš„èªçŸ¥åèª¤ã€‚"]
    };

    function getDynamicContent(p) {
        if (p === 1) return `<div id="book-cover" style="background:#2c1e16;color:#d4af37;"><div class="cover-title">THE MAGIC<br>SENTINEL</div><div class="cover-subtitle">å¿ƒéˆä½ç§»èˆ‡çµ•å°èªçŸ¥çš„æ¥µé™ç ”ç©¶<br>VOL. III â€” INTERNAL USE</div></div>`;
        if (p === 34) return `<h2 style="text-align:center; margin-top:60px; font-weight:300; letter-spacing:5px;">SECTION III</h2><h1 style="text-align:center; font-size:26px; color:var(--accent-brown); letter-spacing:2px;">å·´æ ¼æ‹‰æ–¯æ•ˆæœ</h1><p class="drop-cap" style="margin-top:40px;">æ¯«ç„¡ç–‘å•ï¼Œé€™å€‹æœå·²ç¶“åˆ°é”äº†"å‚³å¥‡ã€çš„åœ°ä½ï¼Œé€™æ˜¯ä¸€å€‹å¦‚æ­¤ä¸å¯èƒ½çš„æ•ˆæœï¼Œä»¥è‡³æ–¼é­”è¡“åœˆå…§æœ€è°æ˜çš„äººéƒ½åœ¨çµç›¡è…¦æ±åœ°å°‹æ‰¾è§£æ±ºè¾¦æ³•ï¼Œç”šè‡³æœ‰äº›äººæ ¹æœ¬ä¸ç›¸ä¿¡é€™å€‹æ•ˆæœçš„å­˜åœ¨ï¼Œæœ¬ç« æˆ‘å°‡å¸¶èˆ‡ä½ ä¸€åŒåˆ†äº«ï¼Œé€™å€‹å‚³å¥‡çš„æ•…äº‹ã€‚</p>`;
        if (p === 35) return `<p>å¿ƒéˆé­”è¡“çš„è–æ¯â€”â€”ACAANè‡³ä»Šå·²æ“æœ‰å¤šå¹´çš„æ­·å²ï¼Œéš¨ä¾¿ä¸€å¼µç‰Œä»»æ„ä¸€å€‹æ•¸å­—çš„å·§åˆï¼Œä¸–ç•Œå„åœ°çš„é­”è¡“å¸«ï¼Œä»–å€‘éƒ½é›æœ‰å±¬æ–¼è‡ªå·±çš„ACAANç‰ˆæœ¬ï¼Œè€Œæœ€å…·ä»£è¡¨æ€§çš„è«éæ–¼å¤§è¡›Â·å·´æ ¼æ‹‰æ–¯ï¼ˆDavid Berglasï¼‰ï¼Œè‡³ä»Šï¼Œé‚„æ˜¯æ²’æœ‰èƒ½ä¸€å€‹é­”è¡“å¸«ï¼Œèƒ½å¤ è§£é‡‹å¤§è¡›æ˜¯å¦‚ä½•é‹ä½œé€™å€‹æ•ˆæœçš„ã€‚ã€‚</p><div class="master-note">Jon Racherbaumeråœ¨ä»–çš„æ›¸&lt;At The Table&gt;ä¸­å¯«é“ï¼Œä»–å°‡é€™ç¨®è¡¨æ¼”å‘½åç‚º"å·´æ ¼æ‹‰æ–¯æ•ˆæœ"ã€‚</div>`;
        if (p === 36) return `<p>å¤§è¡›Â·å·´æ ¼æ‹‰æ–¯ï¼ˆDavid Berglasï¼‰é­”è¡“å²ä¸Šæœ€ç¥ç¥•çš„åå­—ã€‚ä»–æ›¾è®“ç„¡æ•¸å¤§å¸«æ„Ÿåˆ°çµ•æœ›ã€‚</p><div class="book-img"><img src="book1.jpg" alt="Photo"></div><p>ç„¡æ•¸æ¬¡æœ‰äººè§£å¤§è¡›è§£é‡‹é€™å€‹æ•ˆæœçš„ç§˜å¯†ï¼Œä½†ä»–ç¸½æ˜¯æ‹’çµ•ï¼Œä¸¦ä¸æ˜¯ç‚ºäº†éš±è—é€™å€‹æ•ˆæœçš„ç§˜å¯†ï¼Œè€Œæ˜¯ç‚ºäº†ç•™ä¸‹è§€çœ¾å¿ƒä¸­çš„å¥‡è¹Ÿã€‚</p>`;
        if (p === 37) return `<p class="drop-cap">æ•…äº‹ç™¼ç”Ÿåœ¨ 1976 å¹´ã€‚ç•¶æ™‚æˆ‘å·²èªè­˜å¤§è¡›å¤šå¹´ï¼Œå§‹çµ‚æœªèƒ½è¦ªçœ¼ç›®ç¹å‚³èä¸­çš„å¥‡è¹Ÿã€‚ç›´åˆ°é‚£æ¬¡ï¼Œå¤§è¡›é‚€è«‹æˆ‘å»ä»–å®¶ä½œå®¢ã€‚è¨˜å¾—ç•¶æ™‚èŠçš„æ­£æ„‰å¿«æ™‚ï¼Œå¤§è¡›çªç„¶å•æˆ‘ï¼šã€Œéš¨ä¾¿èªªä¸€å¼µç‰Œï¼Œå’Œä¸€å€‹ 1 åˆ° 52 ä¹‹é–“çš„æ•¸å­—ã€‚ã€</p><p>æˆ‘ä¸å‡æ€ç´¢åœ°å›ç­”ï¼šã€Œæ–¹å¡Š 5ï¼Œ32ã€ã€‚</p><p>å¤§è¡›å…ˆåˆ†äº«äº†ä¸€å€‹æœ‰è¶£çš„å°æ•…äº‹å¾Œï¼Œç·©ç·©èµ·èº«ï¼Œ${resultAction} ç•¶æ•¸åˆ°ç¬¬ 32 å¼µæ™‚ï¼Œç©ºæ°£å½·å½¿å‡å›ºäº†...</p><p>ä½ çŸ¥é“çš„...é‚£å¼µç‰Œæ­£æ˜¯ã€Œæ–¹å¡Š 5ã€ï¼æˆ‘æ°¸é å¿˜ä¸äº†é‚£å¤©...é€™å°±æ˜¯å‚³èªªä¸­çš„ã€Œå·´æ ¼æ‹‰æ–¯æ•ˆæœã€ï¼Œå¤šå¸Œæœ›ä½ å€‘ä¹Ÿèƒ½å¤ åœ¨å ´è¦‹è­‰ã€‚</p>`;
        if (p === 38) return `<p style="margin-top:180px; text-align:center; font-style:italic; font-size: 20px;">ã€Œæˆ‘æ°¸é å¿˜ä¸äº†é‚£å€‹ç”·äºº......æ°¸é ã€‚ã€</p><div class="master-note" style="text-align:center;">è‡³æ­¤å¾Œï¼Œæˆ‘ä¸æ–·åœ°åœ¨å°‹æ‰¾ä»»ä½•å¯èƒ½çš„ç­”æ¡ˆ...ä½†ä¸€åˆ‡éƒ½å¤ªä¸å¯èƒ½äº†ï¼Œç›´åˆ°ç¾åœ¨ï¼Œæˆ‘é‚„æ˜¯ä¸€é»æƒ³æ³•éƒ½æ²’æœ‰ã€‚</div>`;
        if (p === 39) return `<p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å°‡åˆ†äº«é€éé€™äº›å¹´çš„ç ”ç©¶ï¼Œç„¡æ•¸çš„å¤œæ™šï¼Œæ€ç´¢å‡ºçš„ACAAN!</p>`;
        if (p === 40) return `<h2 style="text-align:center; margin-top:80px; color:var(--header-text); letter-spacing:3px;">END OF SECTION</h2><hr style="border:0; border-top:1px solid #eee; margin: 40px auto; width: 40%;"><p style="text-align:center; font-size:14px; opacity: 0.6;">ç¬¬å››ç« ï¼šå±¬æ–¼æˆ‘çš„ACAAN</p>`;
        
        let t = dict.T[p % dict.T.length], s1 = dict.S1[(p * 3) % dict.S1.length], s2 = dict.S2[(p + 17) % dict.S2.length], n = dict.N[(p + 5) % dict.N.length];
        return `<h2>${t}</h2><p class="drop-cap">${s1}</p><p>${s2}</p><div class="master-note">${n}</div><p>æˆ‘å€‘å¿…é ˆèªè­˜åˆ°ï¼Œé€™ç¨®å¿ƒç†ç¶­åº¦çš„æ“ç¸±æ˜¯å€åˆ†æ„›å¥½è€…èˆ‡å¤§å¸«çš„åˆ†æ°´å¶ºã€‚</p>`;
    }

    function render() {
        var content = document.getElementById("articleContent"), pgText = document.getElementById("cur-p"), dot = document.getElementById("dot"), artDiv = document.getElementById("article");
        artDiv.scrollTop = 0; content.classList.remove("fade-page"); void content.offsetWidth; content.classList.add("fade-page");
        dot.style.left = currentPage + "%"; pgText.innerText = currentPage;
        content.innerHTML = getDynamicContent(currentPage);
    }

    function next() { if(currentPage < 100) { currentPage++; render(); } }
    function prev() { if(currentPage > 1) { currentPage--; render(); } }
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("keydown", e => { if (e.keyCode == 123 || (e.ctrlKey && e.key.toLowerCase() === 'u')) e.preventDefault(); });
</script>
</body>
</html>
